{"ast":null,"code":"import _slicedToArray from\"C:/Users/PC/Desktop/ffff/snapbuy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useEffect}from'react';import MetaData from'../layout/MetaData';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{updateUser,getUserDetails,clearErrors}from'../../actions/userActions';import{UPDATE_USER_RESET}from'../../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateUser=function UpdateUser(_ref){var history=_ref.history,match=_ref.match;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.user;}),error=_useSelector.error,isUpdated=_useSelector.isUpdated;var _useSelector2=useSelector(function(state){return state.userDetails;}),user=_useSelector2.user;var userId=match.params.id;useEffect(function(){console.log(user&&user._id!==userId);if(user&&user._id!==userId){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setRole(user.role);}if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success('User updated successfully');history.push('/admin/users');dispatch({type:UPDATE_USER_RESET});}},[dispatch,alert,error,history,isUpdated,userId,user]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set('name',name);formData.set('email',email);formData.set('role',role);dispatch(updateUser(user._id,formData));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2 mb-5\",children:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role_field\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"role_field\",className:\"form-control\",name:\"role\",value:role,onChange:function onChange(e){return setRole(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"user\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"admin\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn update-btn btn-block mt-4 mb-3\",children:\"Update\"})]})})})})]})]});};export default UpdateUser;","map":{"version":3,"names":["React","Fragment","useState","useEffect","MetaData","Sidebar","useAlert","useDispatch","useSelector","updateUser","getUserDetails","clearErrors","UPDATE_USER_RESET","jsx","_jsx","jsxs","_jsxs","UpdateUser","_ref","history","match","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","email","setEmail","_useState5","_useState6","role","setRole","alert","dispatch","_useSelector","state","user","error","isUpdated","_useSelector2","userDetails","userId","params","id","console","log","_id","success","push","type","submitHandler","e","preventDefault","formData","FormData","set","children","title","className","onSubmit","htmlFor","value","onChange","target"],"sources":["C:/Users/PC/Desktop/ffff/snapbuy/frontend/src/components/admin/UpdateUser.js"],"sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\r\n\r\nimport MetaData from '../layout/MetaData'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { updateUser, getUserDetails, clearErrors } from '../../actions/userActions'\r\nimport { UPDATE_USER_RESET } from '../../constants/userConstants'\r\n\r\nconst UpdateUser = ({ history, match }) => {\r\n\r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [role, setRole] = useState('')\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { error, isUpdated } = useSelector(state => state.user);\r\n    const { user } = useSelector(state => state.userDetails)\r\n\r\n    const userId = match.params.id;\r\n\r\n    useEffect(() => {\r\n\r\n        console.log(user && user._id !== userId);\r\n        if (user && user._id !== userId) {\r\n            dispatch(getUserDetails(userId))\r\n        } else {\r\n            setName(user.name);\r\n            setEmail(user.email);\r\n            setRole(user.role)\r\n        }\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (isUpdated) {\r\n            alert.success('User updated successfully')\r\n\r\n            history.push('/admin/users')\r\n\r\n            dispatch({\r\n                type: UPDATE_USER_RESET\r\n            })\r\n        }\r\n\r\n    }, [dispatch, alert, error, history, isUpdated, userId, user])\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const formData = new FormData();\r\n        formData.set('name', name);\r\n        formData.set('email', email);\r\n        formData.set('role', role);\r\n\r\n        dispatch(updateUser(user._id, formData))\r\n    }\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={`Update User`} />\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-2\">\r\n                    <Sidebar />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-10\">\r\n                    <div className=\"row wrapper\">\r\n                        <div className=\"col-10 col-lg-5\">\r\n                            <form className=\"shadow-lg\" onSubmit={submitHandler}>\r\n                                <h1 className=\"mt-2 mb-5\">Update User</h1>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"name_field\">Name</label>\r\n                                    <input\r\n                                        type=\"name\"\r\n                                        id=\"name_field\"\r\n                                        className=\"form-control\"\r\n                                        name='name'\r\n                                        value={name}\r\n                                        onChange={(e) => setName(e.target.value)}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"email_field\">Email</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        id=\"email_field\"\r\n                                        className=\"form-control\"\r\n                                        name='email'\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"role_field\">Role</label>\r\n\r\n                                    <select\r\n                                        id=\"role_field\"\r\n                                        className=\"form-control\"\r\n                                        name='role'\r\n                                        value={role}\r\n                                        onChange={(e) => setRole(e.target.value)}\r\n                                    >\r\n                                        <option value=\"user\">user</option>\r\n                                        <option value=\"admin\">admin</option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <button type=\"submit\" className=\"btn update-btn btn-block mt-4 mb-3\" >Update</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default UpdateUser\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}