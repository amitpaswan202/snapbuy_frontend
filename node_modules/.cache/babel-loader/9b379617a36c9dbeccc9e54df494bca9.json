{"ast":null,"code":"import _slicedToArray from\"C:/Users/PC/Desktop/ffff/snapbuy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useEffect}from'react';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';// import Loader from '../layout/Loader'\nimport Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getProductReviews,deleteReview,clearErrors}from'../../actions/productActions';import{DELETE_REVIEW_RESET}from'../../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductReviews=function ProductReviews(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),productId=_useState2[0],setProductId=_useState2[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.productReviews;}),error=_useSelector.error,reviews=_useSelector.reviews;var _useSelector2=useSelector(function(state){return state.review;}),isDeleted=_useSelector2.isDeleted,deleteError=_useSelector2.error;useEffect(function(){if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(productId!==''){dispatch(getProductReviews(productId));}if(isDeleted){alert.success('Review deleted successfully');dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,productId,isDeleted,deleteError]);var deleteReviewHandler=function deleteReviewHandler(id){dispatch(deleteReview(id,productId));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(getProductReviews(productId));};var setReviews=function setReviews(){var data={columns:[{label:'Review ID',field:'id',sort:'asc'},{label:'Rating',field:'rating',sort:'asc'},{label:'Comment',field:'comment',sort:'asc'},{label:'User',field:'user',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};reviews.forEach(function(review){data.rows.push({id:review._id,rating:review.rating,comment:review.comment,user:review.name,actions:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",onClick:function onClick(){return deleteReviewHandler(review._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Product Reviews'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"productId_field\",children:\"Enter Product ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"productId_field\",className:\"form-control\",value:productId,onChange:function onChange(e){return setProductId(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{id:\"search_button\",type:\"submit\",className:\"btn btn-primary btn-block py-2\",children:\"SEARCH\"})]})})}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(MDBDataTable,{data:setReviews(),className:\"px-3\",bordered:true,striped:true,hover:true}):/*#__PURE__*/_jsx(\"p\",{className:\"mt-5 text-center\",children:\"No Reviews.\"})]})})]})]});};export default ProductReviews;","map":{"version":3,"names":["React","Fragment","useState","useEffect","MDBDataTable","MetaData","Sidebar","useAlert","useDispatch","useSelector","getProductReviews","deleteReview","clearErrors","DELETE_REVIEW_RESET","jsx","_jsx","jsxs","_jsxs","ProductReviews","_useState","_useState2","_slicedToArray","productId","setProductId","alert","dispatch","_useSelector","state","productReviews","error","reviews","_useSelector2","review","isDeleted","deleteError","success","type","deleteReviewHandler","id","submitHandler","e","preventDefault","setReviews","data","columns","label","field","sort","rows","forEach","push","_id","rating","comment","user","name","actions","className","onClick","children","title","onSubmit","htmlFor","value","onChange","target","length","bordered","striped","hover"],"sources":["C:/Users/PC/Desktop/ffff/snapbuy/frontend/src/components/admin/ProductReviews.js"],"sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\r\nimport { MDBDataTable } from 'mdbreact'\r\n\r\nimport MetaData from '../layout/MetaData'\r\n// import Loader from '../layout/Loader'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getProductReviews, deleteReview, clearErrors } from '../../actions/productActions'\r\nimport { DELETE_REVIEW_RESET } from '../../constants/productConstants'\r\n\r\nconst ProductReviews = () => {\r\n\r\n    const [productId, setProductId] = useState('')\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { error, reviews } = useSelector(state => state.productReviews);\r\n    const { isDeleted, error: deleteError } = useSelector(state => state.review)\r\n\r\n    useEffect(() => {\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (deleteError) {\r\n            alert.error(deleteError);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (productId !== '') {\r\n            dispatch(getProductReviews(productId))\r\n        }\r\n\r\n        if (isDeleted) {\r\n            alert.success('Review deleted successfully');\r\n            dispatch({ type: DELETE_REVIEW_RESET })\r\n        }\r\n\r\n\r\n\r\n    }, [dispatch, alert, error, productId, isDeleted, deleteError])\r\n\r\n    const deleteReviewHandler = (id) => {\r\n        dispatch(deleteReview(id, productId))\r\n    }\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        dispatch(getProductReviews(productId))\r\n    }\r\n\r\n    const setReviews = () => {\r\n        const data = {\r\n            columns: [\r\n                {\r\n                    label: 'Review ID',\r\n                    field: 'id',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Rating',\r\n                    field: 'rating',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Comment',\r\n                    field: 'comment',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'User',\r\n                    field: 'user',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Actions',\r\n                    field: 'actions',\r\n                },\r\n            ],\r\n            rows: []\r\n        }\r\n\r\n        reviews.forEach(review => {\r\n            data.rows.push({\r\n                id: review._id,\r\n                rating: review.rating,\r\n                comment: review.comment,\r\n                user: review.name,\r\n\r\n                actions:\r\n                    <button className=\"btn btn-danger py-1 px-2 ml-2\" onClick={() => deleteReviewHandler(review._id)}>\r\n                        <i className=\"fa fa-trash\"></i>\r\n                    </button>\r\n            })\r\n        })\r\n\r\n        return data;\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={'Product Reviews'} />\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-2\">\r\n                    <Sidebar />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-10\">\r\n                    <Fragment>\r\n                        <div className=\"row justify-content-center mt-5\">\r\n                            <div className=\"col-5\">\r\n                                <form onSubmit={submitHandler}>\r\n                                    <div className=\"form-group\">\r\n                                        <label htmlFor=\"productId_field\">Enter Product ID</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            id=\"productId_field\"\r\n                                            className=\"form-control\"\r\n                                            value={productId}\r\n                                            onChange={(e) => setProductId(e.target.value)}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <button\r\n                                        id=\"search_button\"\r\n                                        type=\"submit\"\r\n                                        className=\"btn btn-primary btn-block py-2\"\r\n                                    >\r\n                                        SEARCH\r\n\t\t\t\t\t\t\t\t    </button>\r\n                                </ form>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        {reviews && reviews.length > 0 ? (\r\n                            <MDBDataTable\r\n                                data={setReviews()}\r\n                                className=\"px-3\"\r\n                                bordered\r\n                                striped\r\n                                hover\r\n                            />\r\n                        ) : (\r\n                                <p className=\"mt-5 text-center\">No Reviews.</p>\r\n                            )}\r\n\r\n\r\n                    </Fragment>\r\n                </div>\r\n            </div>\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default ProductReviews\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}