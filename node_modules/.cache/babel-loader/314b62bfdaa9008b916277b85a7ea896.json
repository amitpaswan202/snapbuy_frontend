{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAdminProducts,deleteProduct,clearErrors}from'../../actions/productActions';import{DELETE_PRODUCT_RESET}from'../../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductsList=function ProductsList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.products;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products;var _useSelector2=useSelector(function(state){return state.product;}),deleteError=_useSelector2.error,isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(getAdminProducts());if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success('Product deleted successfully');history.push('/admin/products');dispatch({type:DELETE_PRODUCT_RESET});}},[dispatch,alert,error,deleteError,isDeleted,history]);var setProducts=function setProducts(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Name',field:'name',sort:'asc'},{label:'Price',field:'price',sort:'asc'},{label:'Stock',field:'stock',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};products.forEach(function(product){data.rows.push({id:product._id,name:product.name,price:\"$\".concat(product.price),stock:product.stock,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/product/\".concat(product._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",onClick:function onClick(){return deleteProductHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};var deleteProductHandler=function deleteProductHandler(id){dispatch(deleteProduct(id));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Products'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"All Products\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default ProductsList;","map":{"version":3,"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","getAdminProducts","deleteProduct","clearErrors","DELETE_PRODUCT_RESET","jsx","_jsx","jsxs","_jsxs","ProductsList","_ref","history","alert","dispatch","_useSelector","state","products","loading","error","_useSelector2","product","deleteError","isDeleted","success","push","type","setProducts","data","columns","label","field","sort","rows","forEach","id","_id","name","price","concat","stock","actions","children","to","className","onClick","deleteProductHandler","title","bordered","striped","hover"],"sources":["C:/Users/PC/Desktop/ffff/snapbuy/frontend/src/components/admin/ProductsList.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { MDBDataTable } from 'mdbreact'\r\n\r\nimport MetaData from '../layout/MetaData'\r\nimport Loader from '../layout/Loader'\r\nimport Sidebar from './Sidebar'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getAdminProducts, deleteProduct, clearErrors } from '../../actions/productActions'\r\nimport { DELETE_PRODUCT_RESET } from '../../constants/productConstants'\r\n\r\nconst ProductsList = ({ history }) => {\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { loading, error, products } = useSelector(state => state.products);\r\n    const { error: deleteError, isDeleted } = useSelector(state => state.product)\r\n\r\n    useEffect(() => {\r\n        dispatch(getAdminProducts());\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (deleteError) {\r\n            alert.error(deleteError);\r\n            dispatch(clearErrors())\r\n        }\r\n\r\n        if (isDeleted) {\r\n            alert.success('Product deleted successfully');\r\n            history.push('/admin/products');\r\n            dispatch({ type: DELETE_PRODUCT_RESET })\r\n        }\r\n\r\n    }, [dispatch, alert, error, deleteError, isDeleted, history])\r\n\r\n    const setProducts = () => {\r\n        const data = {\r\n            columns: [\r\n                {\r\n                    label: 'ID',\r\n                    field: 'id',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Name',\r\n                    field: 'name',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Price',\r\n                    field: 'price',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Stock',\r\n                    field: 'stock',\r\n                    sort: 'asc'\r\n                },\r\n                {\r\n                    label: 'Actions',\r\n                    field: 'actions',\r\n                },\r\n            ],\r\n            rows: []\r\n        }\r\n\r\n        products.forEach(product => {\r\n            data.rows.push({\r\n                id: product._id,\r\n                name: product.name,\r\n                price: `$${product.price}`,\r\n                stock: product.stock,\r\n                actions: <Fragment>\r\n                    <Link to={`/admin/product/${product._id}`} className=\"btn btn-primary py-1 px-2\">\r\n                        <i className=\"fa fa-pencil\"></i>\r\n                    </Link>\r\n                    <button className=\"btn btn-danger py-1 px-2 ml-2\" onClick={() => deleteProductHandler(product._id)}>\r\n                        <i className=\"fa fa-trash\"></i>\r\n                    </button>\r\n                </Fragment>\r\n            })\r\n        })\r\n\r\n        return data;\r\n    }\r\n\r\n    const deleteProductHandler = (id) => {\r\n        dispatch(deleteProduct(id))\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={'All Products'} />\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-2\">\r\n                    <Sidebar />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-10\">\r\n                    <Fragment>\r\n                        <h1 className=\"my-5\">All Products</h1>\r\n\r\n                        {loading ? <Loader /> : (\r\n                            <MDBDataTable\r\n                                data={setProducts()}\r\n                                className=\"px-3\"\r\n                                bordered\r\n                                striped\r\n                                hover\r\n                            />\r\n                        )}\r\n\r\n                    </Fragment>\r\n                </div>\r\n            </div>\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default ProductsList\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}