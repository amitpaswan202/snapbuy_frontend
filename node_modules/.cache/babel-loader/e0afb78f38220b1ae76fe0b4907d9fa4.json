{"ast":null,"code":"import _slicedToArray from\"C:/Users/PC/Desktop/ffff/snapbuy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useEffect}from'react';import MetaData from'../layout/MetaData';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{updateProfile,loadUser,clearErrors}from'../../actions/userActions';import{UPDATE_PROFILE_RESET}from'../../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProfile=function UpdateProfile(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),avatar=_useState6[0],setAvatar=_useState6[1];var _useState7=useState('/images/default_avatar.jpg'),_useState8=_slicedToArray(_useState7,2),avatarPreview=_useState8[0],setAvatarPreview=_useState8[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.user;}),error=_useSelector2.error,isUpdated=_useSelector2.isUpdated,loading=_useSelector2.loading;useEffect(function(){if(user){setName(user.name);setEmail(user.email);setAvatarPreview(user.avatar.url);}if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success('User updated successfully');dispatch(loadUser());history.push('/me');dispatch({type:UPDATE_PROFILE_RESET});}},[dispatch,alert,error,history,isUpdated]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set('name',name);formData.set('email',email);formData.set('avatar',avatar);dispatch(updateProfile(formData));};var onChange=function onChange(e){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(reader.result);}};reader.readAsDataURL(e.target.files[0]);};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Update Profile'}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",onSubmit:submitHandler,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2 mb-5\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"Avatar Preview\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",accept:\"image/*\",onChange:onChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn update-btn btn-block mt-4 mb-3\",disabled:loading?true:false,children:\"Update\"})]})})})]});};export default UpdateProfile;","map":{"version":3,"names":["React","Fragment","useState","useEffect","MetaData","useAlert","useDispatch","useSelector","updateProfile","loadUser","clearErrors","UPDATE_PROFILE_RESET","jsx","_jsx","jsxs","_jsxs","UpdateProfile","_ref","history","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","email","setEmail","_useState5","_useState6","avatar","setAvatar","_useState7","_useState8","avatarPreview","setAvatarPreview","alert","dispatch","_useSelector","state","auth","user","_useSelector2","error","isUpdated","loading","url","success","push","type","submitHandler","e","preventDefault","formData","FormData","set","onChange","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","children","title","className","onSubmit","encType","htmlFor","id","value","src","alt","accept","disabled"],"sources":["C:/Users/PC/Desktop/ffff/snapbuy/frontend/src/components/user/UpdateProfile.js"],"sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\r\n\r\nimport MetaData from '../layout/MetaData'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { updateProfile, loadUser, clearErrors } from '../../actions/userActions'\r\nimport { UPDATE_PROFILE_RESET } from '../../constants/userConstants'\r\n\r\nconst UpdateProfile = ({ history }) => {\r\n\r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [avatar, setAvatar] = useState('')\r\n    const [avatarPreview, setAvatarPreview] = useState('/images/default_avatar.jpg')\r\n\r\n    const alert = useAlert();\r\n    const dispatch = useDispatch();\r\n\r\n    const { user } = useSelector(state => state.auth);\r\n    const { error, isUpdated, loading } = useSelector(state => state.user)\r\n\r\n    useEffect(() => {\r\n\r\n        if (user) {\r\n            setName(user.name);\r\n            setEmail(user.email);\r\n            setAvatarPreview(user.avatar.url)\r\n        }\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (isUpdated) {\r\n            alert.success('User updated successfully')\r\n            dispatch(loadUser());\r\n\r\n            history.push('/me')\r\n\r\n            dispatch({\r\n                type: UPDATE_PROFILE_RESET\r\n            })\r\n        }\r\n\r\n    }, [dispatch, alert, error, history, isUpdated])\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const formData = new FormData();\r\n        formData.set('name', name);\r\n        formData.set('email', email);\r\n        formData.set('avatar', avatar);\r\n\r\n        dispatch(updateProfile(formData))\r\n    }\r\n\r\n    const onChange = e => {\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                setAvatarPreview(reader.result)\r\n                setAvatar(reader.result)\r\n            }\r\n        }\r\n\r\n        reader.readAsDataURL(e.target.files[0])\r\n\r\n    }\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={'Update Profile'} />\r\n\r\n            <div className=\"row wrapper\">\r\n                <div className=\"col-10 col-lg-5\">\r\n                    <form className=\"shadow-lg\" onSubmit={submitHandler} encType='multipart/form-data'>\r\n                        <h1 className=\"mt-2 mb-5\">Update Profile</h1>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"email_field\">Name</label>\r\n                            <input\r\n                                type=\"name\"\r\n                                id=\"name_field\"\r\n                                className=\"form-control\"\r\n                                name='name'\r\n                                value={name}\r\n                                onChange={(e) => setName(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"email_field\">Email</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                id=\"email_field\"\r\n                                className=\"form-control\"\r\n                                name='email'\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className='form-group'>\r\n                            <label htmlFor='avatar_upload'>Avatar</label>\r\n                            <div className='d-flex align-items-center'>\r\n                                <div>\r\n                                    <figure className='avatar mr-3 item-rtl'>\r\n                                        <img\r\n                                            src={avatarPreview}\r\n                                            className='rounded-circle'\r\n                                            alt='Avatar Preview'\r\n                                        />\r\n                                    </figure>\r\n                                </div>\r\n                                <div className='custom-file'>\r\n                                    <input\r\n                                        type='file'\r\n                                        name='avatar'\r\n                                        className='custom-file-input'\r\n                                        id='customFile'\r\n                                        accept='image/*'\r\n                                        onChange={onChange}\r\n                                    />\r\n                                    <label className='custom-file-label' htmlFor='customFile'>\r\n                                        Choose Avatar\r\n                                </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button type=\"submit\" className=\"btn update-btn btn-block mt-4 mb-3\" disabled={loading ? true : false} >Update</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default UpdateProfile\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}